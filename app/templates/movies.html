<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1">
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link rel="stylesheet" type="text/css" href="../static/css/stylesheet.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<style>

 .dropdown {
    position: relative;

    /** Make it fit tightly around it's children */
    display: inline-block;
}

.dropdown .dropdown-menu {
    position: absolute;

    /**
     * Set the top of the dropdown menu to be positioned 100%
     * from the top of the container, and aligned to the left.
     */
    top: 100%;
    left: 0;

    /** Allow no empty space between this and .dropdown */
    margin: 0;
}

.dropdown:hover .dropdown-menu {

    /** Show dropdown menu */
    display: block;
}

.dropdown {
    position: relative;
    display: inline-block;
}

.dropdown .dropdown-menu {
    position: absolute;
    top: 100%;
    display: none;
    margin: 0;

    /****************
     ** NEW STYLES **
     ****************/

    list-style: none; /** Remove list bullets */
    width: 100%; /** Set the width to 100% of it's parent */
    padding: 0;
}

.dropdown:hover .dropdown-menu {
    display: block;
}

.dropdown button {
    background: #FF6223;
    color: #FFFFFF;
    border: none;
    margin: 0;
    padding: 0.4em 0.8em;
    font-size: 1em;
}

/** List Item Styles **/
.dropdown a {
    display: block;
    padding: 0.2em 0.8em;
    text-decoration: none;
    background: #CCCCCC;
    color: #333333;
}

/** List Item Hover Styles **/
.dropdown a:hover {
    background: #BBBBBB;
}

#nav1 {
    list-style-type: none;
    margin: 0;
    padding: 0;
    overflow: hidden;
    background-color: #333;
}
.panel {
  width: 800
}
.nav1-1 {
    float: left;
}

.nav1-2 {
	float: right;
}

.nav1-2 a {
    display: block;
    color: white;
    text-align: center;
    padding: 14px 16px;
    text-decoration: none;
}

.nav1-2 a:hover {
    color: springgreen;
}

.nav1-1 a {
    display: block;
    color: springgreen;
    text-align: center;
    padding: 14px 16px;
    text-decoration: none;
}

.nav1-1 a:hover {
    color: springgreen;
}

.bookmyshow{
	background-color: dimgrey;
}

#down{
	background-color: lightslategrey
}
#image {
	text-align: center;
}
#image a:hover{
	color: green
}
</style>
<title>ITWS-II Main Project</title>
</head>
<body>
<ul id="nav1">
  <li class="nav1-1"  style="font-size: 20"><a class="active" href="/home"><i style="font-size: 30px; color: grey" class="fa fa-home" ></i></a></li>
  <li class="nav1-1" style="font-size: 20"><a  href="/movies">MOVIES</a></li>
  <li class="nav1-2" style="color: white; font-size: 20; padding-top: 15; padding-right: 50"><span class="glyphicon glyphicon-map-marker" style="color: white; "></span> Hyderabad</li>
  <li class="nav1-2" style="font-size: 20"><a href="#news">CONTACT US</a></li>
  <li class="nav1-2" style="font-size: 20">
    <div id="state"></div>
  </li>
  <li class="nav1-2" style="font-size: 20"><div id="hi"></div></h3></li></center>
  <li class="nav1-2" id="reg" style="font-size: 20"><div id="state1"></div></li>
  <li class="nav1-2" style="font-size: 20"><div id="profile"></div></li>
</ul>
<div class=	"bookmyshow"><br />
	<div style="color: white; font-size: 40px">book<img src="{{ url_for('static', filename='my.png') }}" style="width: 50" />show</div><br />
</div>
<div class="w3-content w3-section" style="max-width:100%">
  <img class="mySlides" src="../static/img/Begumjaan.jpg" style="height: 500; width: 100%" >
  <img class="mySlides" src="../static/img/Badrinath.jpg" style="height: 500; width: 100%">
  <img class="mySlides" src="../static/img/Justice.jpg" style="height: 500; width: 100%">
</div>


<div id="container-fluid" style="background-color: grey;">
<div class="row">
<br /><div class="col-md-6"><center>
<div id="movies">
</div>
</center></div>
<div class="col-md-6" style="text-align: center;">
  <div class="panel panel-success">
    <a href="#filter" data-toggle="collapse"><div class="panel-heading"><h1>Filter By</h1></div>
    <div id="filter" class="collapse">
      <div class="panel-body">
        <ul class="list-group">
          <li class="list-group-item"><h2><a href="#lang" data-toggle="collapse">Language</a></h2>
          <div id="lang" class="collapse"><ul class="list-group">
            <li class="list-group-item"><div class="radio"><label><input type="radio" name="optradio" onclick="filter('all')">All</label></div></li>
            <li class="list-group-item"><div class="radio"><label><input type="radio" name="optradio" onclick="filter('Hindi')">Hindi</label></div></li>
            <li class="list-group-item" ><div class="radio"><label><input type="radio" name="optradio"onclick="filter('English')">English</label></div></li>
          </ul></div>
          </li>
          <li class="list-group-item"><h2><a href="#rate" data-toggle="collapse">Rating</a></h2>
            <div class="collapse" id="rate">
            <ul class="list-group-item">
              <li class="list-group-item"><div class="radio"><label><input type="radio" name="optradio" onclick="filter('10-20')">10-20</label></div></li>
              <li class="list-group-item"><div class="radio"><label><input type="radio" name="optradio" onclick="filter('20-30')">20-30</label></div></li>
              <li class="list-group-item"><div class="radio"><label><input type="radio" name="optradio" onclick="filter('30-40')">30-40</label></div></li>
              <li class="list-group-item"><div class="radio"><label><input type="radio" name="optradio" onclick="filter('40-50')">40-50</label></div></li>
              <li class="list-group-item"><div class="radio"><label><input type="radio" name="optradio" onclick="filter('50-60')">50-60</label></div></li> 
              <li class="list-group-item"><div class="radio"><label><input type="radio" name="optradio" onclick="filter('60-70')">60-70</label></div></li>
              <li class="list-group-item"><div class="radio"><label><input type="radio" name="optradio" onclick="filter('70-80')">70-80</label></div></li>
              <li class="list-group-item"><div class="radio"><label><input type="radio" name="optradio" onclick="filter('80-90')">80-90</label></div></li>
              <li class="list-group-item"><div class="radio"><label><input type="radio" name="optradio" onclick="filter('90-100')">90-100</label></div></li>
            </ul>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
</div>
</div>



<script>
var myIndex = 0;
carousel();
function carousel() {
    var i;
    var x = document.getElementsByClassName("mySlides");
    for (i = 0; i < x.length; i++) {
       x[i].style.display = "none";  
    }
    myIndex++;
    if (myIndex > x.length) {
    	myIndex = 1;
    }    
    x[myIndex-1].style.display = "block";  
    setTimeout(carousel, 2000); 
}

$.ajax({
    url:'https://127.0.0.1:5000/movies',
    method:'POST',
    success:function(response){
      console.log(response)
      if(response.state==="LOGOUT"){
          x="<a href='/logout'>LOGOUT</a>";
          y="<a href='#' style='font-size: 23;'>Hi "+(response.user).toString()+"</a>";
          z="<a href='/profile'><i class='material-icons' style='padding-right: 20; font-size: 30'>person</i></a>"
          $("#hi").append(y);
          $("#profile").append(z);
      }
      else{
        x="<a href='/login'>SIGN IN</a>";
        y="<a href='/register'><i class='material-icons' style='color: grey; font-size: 30'  id='reg'>person_add</i></a>"
        $("#state1").append(y);
      }
      $("#state").append(x);
    },
    error:function(response){
      alert(JSON.parse(response.responseText).message);
    }
  });

$.ajax({
   url:'https://127.0.0.1:5000/movies',
    method:'POST',
    success:function(response){
      movies=response.movies.movies;
      for(i in movies){
          console.log(movies[i]);
          var j=i;
          i=movies[i];
          x="<div class='panel panel-success'><div class='panel-heading'><h1 style='text-align: center; font-family:'Palatino Linotype', 'Book Antiqua', Palatino, serif'><a href ='#foo"+j.toString()+"' data-toggle='collapse'>"+i.Movie_Name+"</a></div><div id='foo"+j.toString()+"' class='collapse'><div class='panel-body'><center><a href='/movies/show/"+i.Movie_Name+"'><img src='../static/img/"+i.Movie_Name+".jpg' height='200' width='500' /></a></center></div><ul class='list-group'><li class='list-group-item' style='text-align:center; font-size:20;' >"+i.Language+"</li><li class='list-group-item' style='text-align:center; font-size:20' >"+i.Cast+"</li><li class='list-group-item' style='text-align:center; font-size:20' >"+i.Desc+"</li><li class='list-group-item' style='text-align:center; font-size:20'>"+i.Rating+" </li></ul></div></div>"
          //x="<table><tr><td rowspan='7'><a href='/movies/show/"+i.Movie_Name+"'><img src='../static/img/"+i.Movie_Name+".jpg' height='200' width='500' /></a></td><td>Movie Name: "+i.Movie_Name+"</td></tr><tr><td>Language: "+i.Language+"</td></tr><tr><td>Cast: "+i.Cast+"</td></tr><tr><td>Description: "+i.Desc+"</td></tr><tr><td>Rating: "+i.Rating.toString()+"</td></tr></table>"
        $("#movies").append(x);
      }
    },
    error:function(response){
        alert(JSON.parse(response.responseText).message);
    }   
});


$("#click").click(function(){
  $.ajax({
    url:'https://127.0.0.1:5000/movies',
    method:'POST',
    success:function(response){
      console.log(response)
      if(response.state==="LOGOUT"){
          $('.rat').click(function(){
           value=this.value;
          console.log(value);
        });
          
      }
      else{
        window.location.href="/login";
      }
    }
  });
});


var func=function(str){
  document.getElementById("select").innerHTML=str;
   console.log(str);
}

var filter=function(str){
  console.log(str);
  ajax_func(str);
}

var ajax_func=function(str){
  $.ajax({
   url:'https://127.0.0.1:5000/movies',
    method:'POST',
    success:function(response){
      movies=response.movies.movies;
      if(str==="all"){
        z="";
      for(k in movies){
          console.log(movies[k]);
          var j=k;
          i=movies[k];
          z+="<div class='panel panel-success'><div class='panel-heading'><h1 style='text-align: center; font-family:'Palatino Linotype', 'Book Antiqua', Palatino, serif'><a href ='#foo"+j.toString()+"' data-toggle='collapse'>"+i.Movie_Name+"</a></div><div id='foo"+j.toString()+"' class='collapse'><div class='panel-body'><center><a href='/movies/show/"+i.Movie_Name+"'><img src='../static/img/"+i.Movie_Name+".jpg' height='200' width='500' /></a></center></div><ul class='list-group'><li class='list-group-item' style='text-align:center; font-size:20;' >"+i.Language+"</li><li class='list-group-item' style='text-align:center; font-size:20' >"+i.Cast+"</li><li class='list-group-item' style='text-align:center; font-size:20' >"+i.Desc+"</li><li class='list-group-item' style='text-align:center; font-size:20'>"+i.Rating+"</li></ul></div></div>"
      }
      $("#movies").html(z);
    }
    else if(str==="Hindi" || str==="English"){
      z="";
        for(k in movies){
          var j=k;
          i=movies[k];
          if(i.Language===str){
            console.log(movies[k]);
          z+="<div class='panel panel-success'><div class='panel-heading'><h1 style='text-align: center; font-family:'Palatino Linotype', 'Book Antiqua', Palatino, serif'><a href ='#foo"+j.toString()+"' data-toggle='collapse'>"+i.Movie_Name+"</a></div><div id='foo"+j.toString()+"' class='collapse'><div class='panel-body'><center><a href='/movies/show/"+i.Movie_Name+"'><img src='../static/img/"+i.Movie_Name+".jpg' height='200' width='500' /></a></center></div><ul class='list-group'><li class='list-group-item' style='text-align:center; font-size:20;' >"+i.Language+"</li><li class='list-group-item' style='text-align:center; font-size:20' >"+i.Cast+"</li><li class='list-group-item' style='text-align:center; font-size:20' >"+i.Desc+"</li><li class='list-group-item' style='text-align:center; font-size:20'>"+i.Rating+"</li></ul></div></div>"
          }
        }
        $("#movies").html(z);  
      }

    else{
      z="";
      var a=str.split('-');
      for(i in movies){
          //console.log(movies[i]);
          var j=i;
          i=movies[i];
          c=(i.Rating).replace("%","");
          if(parseInt(c)<=parseInt(a[1]) && parseInt(c)>= parseInt(a[0])){
          z+="<div class='panel panel-success'><div class='panel-heading'><h1 style='text-align: center; font-family:'Palatino Linotype', 'Book Antiqua', Palatino, serif'><a href ='#foo"+j.toString()+"' data-toggle='collapse'>"+i.Movie_Name+"</a></div><div id='foo"+j.toString()+"' class='collapse'><div class='panel-body'><center><a href='/movies/show/"+i.Movie_Name+"'><img src='../static/img/"+i.Movie_Name+".jpg' height='200' width='500' /></a></center></div><ul class='list-group'><li class='list-group-item' style='text-align:center; font-size:20;' >"+i.Language+"</li><li class='list-group-item' style='text-align:center; font-size:20' >"+i.Cast+"</li><li class='list-group-item' style='text-align:center; font-size:20' >"+i.Desc+"</li><li class='list-group-item' style='text-align:center; font-size:20'>"+i.Rating+"</li></ul></div></div>"
      }
      }
      $("#movies").html(z);
    }
    },
    error:function(response){
        alert(JSON.parse(response.responseText).message);
    }   
});
}

</script>
<div id="down" style = "height: 350">
	<div><br />
		<div style="color: white; font-size: 40px; text-align: center;">book<img src="{{ url_for('static', filename='my.png') }}" style="width: 50" />show</div><br />
			<div id="image">
				<a href="https://www.facebook.com/BookMyShowIN"><img src="{{ url_for('static', filename='fb.png') }}" class="img-circle" style="width: 70" /></a>
				<a href="https://plus.google.com/110517543803442814698/posts"><img src="{{ url_for('static', filename='g+.png') }}" class="img-circle" style="width: 70"/></a>
				<a href="https://www.instagram.com/bmsbookmyshow/"><img src="{{ url_for('static', filename='instagram.png') }}" class="img-circle" style="width: 70"/></a>
				<a href="https://twitter.com/BookMyShow/"><img src="{{ url_for('static', filename='twitter.png') }}" class="img-circle" style="width: 70"/></a>
			</div>
		<br /><br/><br/>
		<div style="text-align: center;">Copyright 2017 &copy; Bigtree Entertainment Pvt. Ltd. All Rights Reserved.</div>
<div style='text-align:center;'>The content and images used on this site are copyright protected and copyrights vests with the respective owners. The usage of the content and images on this website is intended to promote the works and no endorsement of </div> <div style="text-align: center;">the artist shall be implied. Unauthorized use is prohibited and punishable by law.</div>
</div>
</div>
</body>
</html>	
